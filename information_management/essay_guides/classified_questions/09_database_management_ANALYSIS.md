# 資料庫管理 - 完整題目解析

> **更新日期**: 2024-12-05  
> **適用科目**: 資訊管理  
> **題目來源**: 104-114年歷屆考題

這份文件針對**資料庫管理**相關題目提供詳盡的申論題答題架構，涵蓋關聯式資料庫、SQL、正規化、ACID特性、NoSQL、資料庫安全等核心考點。

---

## 📊 題目總覽

| 統計項目 | 數量 |
|---------|------|
| **資料庫相關題目** | **25 題** |
| **高考三級+近三年** | 8 次 |
| **重要性排名** | **No. 8** |

### 題型分類

| 題型 | 占比 | 代表題目 | 難度 |
|------|------|---------|------|
| **關聯式資料庫基礎** | 32% | RDBMS、SQL、2PC、正規化 | ⭐⭐⭐⭐ |
| **資料庫安全** | 24% | SQL Injection、安全威脅、雲端防護 | ⭐⭐⭐⭐⭐ |
| **ACID特性與交易** | 12% | 資料庫交易4特性 | ⭐⭐⭐⭐ |
| **NoSQL vs RDB** | 12% | 差異比較 | ⭐⭐⭐⭐ |
| **資料庫設計** | 12% | 邏輯/實體設計、正規化 | ⭐⭐⭐⭐⭐ |
| **其他** | 8% | 分散式DB、DBMS功能 | ⭐⭐⭐ |

---

## 🎯 資料庫管理申論題答題黃金架構

### 架構一：關聯式資料庫基礎題型

```
第一部分：關聯式資料庫定義 (15%)
└─ 定義 + 核心概念 (表格、關聯)

第二部分：資料模組邏輯架構 (40%)
├─ 三層架構
│   ├─ 外部層 (使用者視圖)
│   ├─ 概念層 (邏輯架構)
│   └─ 內部層 (實體儲存)
└─ 關聯式模型組成
    ├─ Table (表格)
    ├─ Row (列/紀錄)
    ├─ Column (欄/屬性)
    └─ Key (鍵)

第三部分：SQL (30%)
├─ 定義: Structured Query Language
├─ 功能分類
│   ├─ DDL (定義): CREATE/ALTER/DROP
│   ├─ DML (操作): SELECT/INSERT/UPDATE/DELETE
│   └─ DCL (控制): GRANT/REVOKE
└─ 範例

第四部分：2PC (15%)
├─ 定義: Two-Phase Commit
├─ 用途: 分散式交易一致性
└─ 兩階段流程
```

### 架構二：資料庫正規化題型 (110年關務完整題!)

```
第一部分：正規化目的 (10%)
└─ 消除冗餘、異常

第二部分：1NF/2NF/3NF定義 (60%)
├─ 1NF (第一正規化)
│   └─ 每格僅一值 (原子性)
├─ 2NF (第二正規化)
│   └�� 消除部分相依
└─ 3NF (第三正規化)
    └─ 消除遞移相依

第三部分：範例應用 (25%)
└─ 具體案例逐步正規化

第四部分：正規化權衡 (5%)
└─ 過度正規化 → 查詢複雜
```

### 架構三：ACID特性題型 (110年普考必考!)

```
ACID四大特性:
A - Atomicity (原子性)
C - Consistency (一致性)
I - Isolation (隔離性)
D - Durability (持久性)

每個特性:
1. 定義 (1-2行)
2. 意涵 (具體說明)
3. 範例 (如轉帳情境)
4. 違反後果
```

---

## 📚 核心知識解析

### 一、關聯式資料庫 (Relational Database) 基礎

#### (1) RDB定義與三層架構

**關聯式資料庫 (RDBMS)**: 基於**關聯模型**,以**表格** (Table) 形式儲存資料,透過**鍵** (Key) 建立表格間關聯的資料庫系統。

**ANSI/SPARC三層架構**:

```
┌─────────────────────────────────┐
│  外部層 (External Level)         │
│  使用者視圖 (User Views)         │
│  ├─ 視圖1: 學生成績               │
│  ├─ 視圖2: 課程清單               │
│  └─ 視圖3: 教師課表               │
└───────────┬─────────────────────┘
            ↓
┌─────────────────────────────────┐
│  概念層 (Conceptual Level)       │
│  邏輯架構 (Logical Schema)       │
│  所有資料的整體視圖              │
│  ├─ 學生表 (Student)              │
│  ├─ 課程表 (Course)               │
│  └─ 選課表 (Enrollment)           │
└───────────┬─────────────────────┘
            ↓
┌─────────────────────────────────┐
│  內部層 (Internal Level)         │
│  實體儲存 (Physical Storage)     │
│  ├─ 資料檔案存放位置              │
│  ├─ 索引結構 (B+ Tree)            │
│  └─ 儲存格式                     │
└─────────────────────────────────┘

【資料獨立性】
✅ 邏輯獨立性: 外部層獨立於概念層
   改變概念Schema → 視圖不受影響

✅ 實體獨立性: 概念層獨立於內部層
   改變儲存方式 → 邏輯Schema不變
```

**關聯式模型組成**:

```
【Table (表格/關聯)】
學生表 (Student)
┌────────┬────────┬───────┬────────┐
│ 學號   │ 姓名   │ 年齡  │ 科系   │
│(PK)    │        │       │        │
├────────┼────────┼───────┼────────┤
│ S001   │ 王小明 │ 20    │ 資管   │
│ S002   │ 李小華 │ 21    │ 企管   │
└────────┴────────┴───────┴────────┘
  ↑        ↑        ↑       ↑
 Column   Column   Column  Column
 (欄/屬性)

每一列 = Row (列/紀錄/Tuple)

【Key (鍵)】
Primary Key (主鍵, PK):
  唯一識別每筆紀錄
  範例: 學號

Foreign Key (外鍵, FK):
  建立表格間關聯
  範例: 選課表的學號 (參照學生表)

【關聯】
一對一 (1:1): 學生 ↔ 學號證
一對多 (1:N): 科系 ↔ 學生
多對多 (M:N): 學生 ↔ 課程
```

---

#### (2) SQL (Structured Query Language)

**定義**: 用於管理關聯式資料庫的**標準查詢語言**。

**SQL分類**:

```
【DDL - Data Definition Language (資料定義)】
定義資料庫結構

CREATE: 建立
  CREATE TABLE Student (
    學號 VARCHAR(10) PRIMARY KEY,
    姓名 VARCHAR(50),
    年齡 INT
  );

ALTER: 修改
  ALTER TABLE Student ADD 電話 VARCHAR(20);

DROP: 刪除
  DROP TABLE Student;

【DML - Data Manipulation Language (資料操作)】
操作資料內容

SELECT: 查詢
  SELECT 姓名, 年齡 
  FROM Student 
  WHERE 年齡 > 20;

INSERT: 新增
  INSERT INTO Student VALUES ('S003', '張三', 22);

UPDATE: 更新
  UPDATE Student SET 年齡 = 21 WHERE 學號 = 'S001';

DELETE: 刪除
  DELETE FROM Student WHERE 學號 = 'S001';

【DCL - Data Control Language (資料控制)】
權限管理

GRANT: 授權
  GRANT SELECT ON Student TO user1;

REVOKE: 撤銷
  REVOKE SELECT ON Student FROM user1;

【TCL - Transaction Control Language (交易控制)】
COMMIT: 提交
ROLLBACK: 回復
SAVEPOINT: 儲存點
```

---

#### (3) 2PC (Two-Phase Commit, 兩階段提交)

**定義**: 確保**分散式交易**在多個資料庫節點上**全部成功或全部失敗**的協定。

**用途**: 分散式資料庫的交易一致性

**兩階段流程**:

```
【Phase 1: 準備階段 (Prepare)】

協調者 (Coordinator):
  向所有參與者發送「準備提交」請求

參與者 (Participants):
  執行交易,將結果寫入Log
  回覆: 
    ✅ 「Yes, 準備好了」(可以提交)
    ❌ 「No, 無法提交」(有問題)

【Phase 2: 提交階段 (Commit)】

IF (所有參與者都回覆Yes):
  協調者 → 廣播「Commit」
  參與者 → 正式提交交易
ELSE:
  協調者 → 廣播「Abort」
  參與者 → 回復 (Rollback)

【範例: 跨行轉帳】

情境: A銀行帳戶 → B銀行帳戶轉$1000

Phase 1 (準備):
  A銀行: 檢查餘額,扣除$1000 → Yes
  B銀行: 準備增加$1000 → Yes

Phase 2 (提交):
  協調者: 收到兩個Yes → 廣播Commit
  A銀行: 正式扣除
  B銀行: 正式增加

若Phase 1任一失敗:
  協調者: 廣播Abort
  兩銀行: 全部Rollback
  → 確保一致性
```

**優缺點**:

```
【優點】
✅ 保證一致性 (ACID的A)
✅ 全部成功或全部失敗

【缺點】
❌ 阻塞: Phase 1所有節點鎖定資料
❌ 單點故障: 協調者掛掉→所有卡住
❌ 效能差

【替代方案】
現代微服務: Saga模式
(補償交易,非強一致性)
```

---

### 二、資料庫正規化 (Normalization)

#### (1) 正規化目的

**目的**: 消除**資料冗餘**與**更新異常**,提升資料完整性。

**資料異常**:

```
【範例: 未正規化表格】
課程表 (Course_Enrollment)
┌───────┬────────┬────────┬────────┬────────┐
│ 學號  │ 姓名   │ 課程   │ 教師   │ 教師辦公室│
├───────┼────────┼────────┼────────┼────────┤
│ S001  │ 王小明 │ 資料庫 │ 張教授 │ R101   │
│ S001  │ 王小明 │ 演算法 │ 李教授 │ R102   │
│ S002  │ 李小華 │ 資料庫 │ 張教授 │ R101   │
└───────┴────────┴────────┴────────┴────────┘
        ↑冗餘:王小明出現2次
                    ↑冗餘:張教授R101重複

【插入異常 (Insertion Anomaly)】
問題: 新進教師還沒開課
→ 無法記錄 (因為需要學號)

【刪除異常 (Delete Anomaly)】
問題: S002退選資料庫
→ 李小華紀錄刪除
→ 資料庫課程資訊也消失!

【更新異常 (Update Anomaly)】
問題: 張教授搬辦公室 R101 → R103
→ 需更新多筆紀錄 (第1、3列)
→ 若漏改 → 資料不一致
```

---

#### (2) 正規化定義 (110年關務完整題!)

**1NF (First Normal Form, 第一正規化)**

**定義**: 每個欄位只能有**單一值** (原子性, Atomic)

```
【違反1NF範例】
學生表
┌───────┬────────┬─────────────┐
│ 學號  │ 姓名   │ 選修課程    │
├───────┼────────┼─────────────┤
│ S001  │ 王小明 │ 資料庫,演算法│ ← 違反!
└───────┴────────┴─────────────┘
  選修課程有多個值

【轉換為1NF】
學生表
┌───────┬────────┐
│ 學號  │ 姓名   │
├───────┼────────┤
│ S001  │ 王小明 │
└───────┴────────┘

選課表
┌───────┬────────┐
│ 學號  │ 課程   │
├───────┼────────┤
│ S001  │ 資料庫 │
│ S001  │ 演算法 │
└───────┴────────┘
  每個欄位都是單一值 ✅
```

---

**2NF (Second Normal Form, 第二正規化)**

**定義**: 滿足1NF,且**非鍵屬性完全相依於主鍵**,無**部分相依** (Partial Dependency)。

**適用**: 主鍵是**複合鍵** (多個欄位)時

```
【違反2NF範例】
選課表 (1NF但非2NF)
┌───────┬────────┬────────┬────────┐
│ 學號  │ 課程   │ 成績   │ 教師   │
│ (PK)  │ (PK)   │        │        │
├───────┼────────┼────────┼────────┤
│ S001  │ 資料庫 │ 90     │ 張教授 │
│ S001  │ 演算法 │ 85     │ 李教授 │
└───────┴────────┴────────┴────────┘
  PK = (學號, 課程)

【函數相依分析】
學號, 課程 → 成績 ✅ (完全相依)
學號, 課程 → 教師 ❌ (僅需課程即可決定教師)
                    (部分相依!)

【轉換為2NF】
選課表
┌───────┬────────┬────────┐
│ 學號  │ 課程   │ 成績   │
├───────┼────────┼────────┤
│ S001  │ 資料庫 │ 90     │
└───────┴────────┴────────┘

課程表
┌────────┬────────┐
│ 課程   │ 教師   │
├────────┼────────┤
│ 資料庫 │ 張教授 │
│ 演算法 │ 李教授 │
└────────┴────────┘
  消除部分相依 ✅
```

---

**3NF (Third Normal Form, 第三正規化)**

**定義**: 滿足2NF,且**非鍵屬性不相依於其他非鍵屬性**,無**遞移相依** (Transitive Dependency)。

```
【違反3NF範例】
學生表 (2NF但非3NF)
┌───────┬────────┬────────┬────────────┐
│ 學號  │ 姓名   │ 科系   │ 科系辦公室 │
│ (PK)  │        │        │            │
├───────┼────────┼────────┼────────────┤
│ S001  │ 王小明 │ 資管   │ M101       │
│ S002  │ 李小華 │ 企管   │ M102       │
└───────┴────────┴────────┴────────────┘

【函數相依分析】
學號 → 姓名 ✅
學號 → 科系 ✅
學號 → 科系辦公室 ❌ (實際是學號→科系→科系辦公室)
                   (遞移相依!)

【轉換為3NF】
學生表
┌───────┬────────┬────────┐
│ 學號  │ 姓名   │ 科系   │
├───────┼────────┼────────┤
│ S001  │ 王小明 │ 資管   │
└───────┴────────┴────────┘

科系表
┌────────┬────────────┐
│ 科系   │ 科系辦公室 │
├────────┼────────────┤
│ 資管   │ M101       │
│ 企管   │ M102       │
└────────┴────────────┘
  消除遞移相依 ✅
```

---

**110年關務考題完整範例**:

```
【原始資料】
學院、學院代碼、科系、科系代碼、
課程、課程代碼、學分、教師、教師代碼

【1NF】
統一表 (所有屬性原子性)
PK = (學院代碼, 科系代碼, 課程代碼, 教師代碼)

【2NF】消除部分相依
分成:
├─ 學院表 (學院代碼 → 學院名稱)
├─ 科系表 (科系代碼 → 科系名稱, 學院代碼)
├─ 課程表 (課程代碼 → 課程名稱, 學分)
├─ 教師表 (教師代碼 → 教師姓名)
└─ 開課表 (科系代碼, 課程代碼, 教師代碼)

【3NF】消除遞移相依
確保:
- 學院代碼不重複出現在科系表之外
- 所有非鍵屬性僅相依於主鍵
```

**正規化權衡**:

```
【優點】
✅ 資料不冗餘
✅ 避免更新異常
✅ 資料完整性高

【缺點】
❌ 表格變多
❌ 查詢需JOIN多表 (效能差)

【反正規化 (Denormalization)】
OLAP系統:
為了查詢效能,刻意冗餘
(如資料倉儲的星狀架構)
```

---

**最後更新**: 2024-12-05  
**文件進度**: 關聯式DB+正規化完成,準備繼續ACID+NoSQL...

### 三、ACID交易特性 (110年普考必考!)

#### (1) 交易 (Transaction) 定義

**交易**: 一組**不可分割**的資料庫操作,**全部成功或全部失敗**。

```
範例: 銀行轉帳
BEGIN TRANSACTION
  UPDATE Account SET balance = balance - 1000 WHERE id = 'A';
  UPDATE Account SET balance = balance + 1000 WHERE id = 'B';
COMMIT;

若任一步驟失敗 → ROLLBACK (全部復原)
```

---

#### (2) ACID四大特性

**A - Atomicity (原子性)**

```
【定義】
交易是**不可分割**的最小單位
全部成功 (Commit) 或全部失敗 (Rollback)

【意涵】
不存在「部分完成」的狀態

【範例】
轉帳交易:
1. A帳戶扣款 $1000
2. B帳戶入款 $1000

原子性保證:
✅ 兩步都成功 → Commit
❌ 任一失敗 → 全部Rollback
❌不會: A扣了但B沒收到 (錢消失!)

【違反後果】
資料不一致
金錢憑空消失或增加
```

---

**C - Consistency (一致性)**

```
【定義】
交易執行前後,資料庫必須保持**一致狀態**
符合所有完整性限制 (Integrity Constraints)

【意涵】
不違反業務規則

【完整性限制】
├─ 主鍵限制 (Primary Key Constraint)
├─ 外鍵限制 (Foreign Key)
├─ 唯一性限制 (Unique)
├─ 非空限制 (Not Null)
└─ 檢查限制 (Check, 如餘額>=0)

【範例】
轉帳交易:
業務規則: 總金額不變

交易前:
A: $5000
B: $3000
總額: $8000

交易後:
A: $4000
B: $4000
總額: $8000 ✅ (保持一致)

【違反後果】
若未保證C:
A: $4000
B: $3000 (轉帳失敗但A已扣)
總額: $7000 ❌ (錢憑空消失!)
```

---

**I - Isolation (隔離性)**

```
【定義】
**並行交易**互不干擾
每個交易如同獨自執行

【意涵】
交易A看不到交易B的中間狀態

【問題: 若無隔離性】

髒讀 (Dirty Read):
  T1: 更新A=100
  T2: 讀到A=100
  T1: Rollback (A回到50)
  T2: 用了錯誤值100 ❌

不可重複讀 (Non-repeatable Read):
  T1: 讀A=50
  T2: 更新A=100
  T2: Commit
  T1: 再讀A=100
  T1: 兩次讀不同! ❌

幻讀 (Phantom Read):
  T1: SELECT COUNT(*) → 100筆
  T2: INSERT一筆
  T2: Commit
  T1: SELECT COUNT(*) → 101筆
  T1: 幻覺出現新資料 ❌

【隔離等級】
從低到高:
READ UNCOMMITTED (最低,可髒讀)
READ COMMITTED (防髒讀)
REPEATABLE READ (防不可重複讀)
SERIALIZABLE (最高,完全隔離)

【實現機制】
鎖定 (Locking):
├─ 共享鎖 (S-Lock, 讀)
└─ 排他鎖 (X-Lock, 寫)

MVCC (Multi-Version Concurrency Control):
  每個交易看到自己版本的資料
  (PostgreSQL, MySQL InnoDB)
```

---

**D - Durability (持久性)**

```
【定義】
交易一旦**Commit**,結果**永久保存**
即使系統當機也不遺失

【意涵】
已提交資料寫入永久儲存

【實現機制】

1. Write-Ahead Logging (WAL)
   ├─ 先寫Log再寫資料
   ├─ Log寫入持久儲存 (磁碟)
   └─ 系統當機 → 用Log恢復

2. Checkpoint
   ├─ 定期將記憶體資料刷到磁碟
   └─ 恢復時從最近Checkpoint開始

【範例】
轉帳Commit後
→ 立即寫入Log (磁碟)
→ 即使當機,重啟後可恢復

【違反後果】
已Commit交易消失
客戶: 我明明轉帳成功!
系統: 找不到紀錄 ❌
```

---

**ACID總結表**:

| 特性 | 定義簡述 | 違反後果 |
|------|---------|---------|
| **A** 原子性 | 全成功或全失敗 | 部分完成,資料不一致 |
| **C** 一致性 | 符合規則 | 違反業務邏輯 |
| **I** 隔離性 | 並行不干擾 | 髒讀、不可重複讀 |
| **D** 持久性 | Commit永久保存 | 資料遺失 |

---

### 四、NoSQL vs 關聯式資料庫

#### (1) NoSQL定義

**NoSQL**: **Not Only SQL**,非關聯式資料庫,為**大數據、高併發**場景設計。

**四大類型**:

```
【Key-Value】
最簡單
├─ 結構: Key → Value
├─ 範例: Redis, DynamoDB
└─ 用途: 快取、Session

【Document】
文件導向 (JSON/BSON)
├─ 結構: 文件 (可巢狀)
├─ 範例: MongoDB, CouchDB
└─ 用途: 內容管理、電商

【Column-Family】
列族導向
├─ 結構: Row Key → Column Families
├─ 範例: Cassandra, HBase
└─ 用途: 大數據、時序資料

【Graph】
圖形資料庫
├─ 結構: 節點+關係
├─ 範例: Neo4j
└─ 用途: 社交網路、推薦系統
```

---

#### (2) RDB vs NoSQL比較 (110年關務考題!)

| 面向 | 關聯式資料庫 (RDB) | NoSQL |
|------|------------------|--------|
| **資料模型** | 表格 (Table), 固定Schema | **彈性Schema** (Schema-less) |
| **Schema** | 事先定義,嚴格 | **動態**,可隨時調整 |
| **資料類型** | 結構化 | **結構化+半結構化+非結構化** |
| **擴展性** | 垂直擴展 (Scale-up, 升級硬體) | **水平擴展** (Scale-out, 加機器) |
| **一致性** | **ACID保證** (強一致性) | BASE (最終一致性, Eventually Consistent) |
| **交易支援** | **完整ACID** | 有限 (某些NoSQL支援) |
| **查詢語言** | **SQL** (標準化) | 各家不同 (如MongoDB Query) |
| **JOIN** | **完整支援** | 弱或不支援 (需應用層處理) |
| **適用場景** | 交易系統 (金融、ERP) | **大數據、高併發** (社群、IoT) |
| **資料量** | GB-TB | **TB-PB** |
| **效能** | JOIN複雜查詢慢 | **讀寫極快** (單純查詢) |
| **範例** | MySQL, PostgreSQL, Oracle | **MongoDB, Cassandra, Redis** |

**詳細說明**:

```
【Schema彈性】
RDB:
  建表時定義Schema
  新增欄位 → ALTER TABLE (需停機)

NoSQL (MongoDB):
  {
    "name": "Alice",
    "age": 25
  }
  下一筆可以不同:
  {
    "name": "Bob",
    "email": "bob@example.com",
    "hobbies": ["reading", "coding"]
  }
  ✅ 彈性!無需事先定義

【水平擴展】
RDB:
  單台機器 → 升級CPU/RAM (有上限)
  分散式困難 (需Sharding, 複雜)

NoSQL:
  設計為分散式
  加機器 → 自動分散資料 (Sharding)
  可線性擴展 (10台→100台→1000台)

【一致性】
RDB: ACID → 強一致性
  轉帳後立即查詢 → 看到最新餘額

NoSQL: BASE → 最終一致性
  寫入後短時間內可能讀到舊資料
  但最終會一致
  
  範例: Facebook按讚
    你按讚 → 朋友可能晚幾秒才看到
    但最終都會看到 ✅

【何時用NoSQL?】
✅ 資料量巨大 (TB-PB)
✅ 需快速擴展
✅ Schema頻繁變動
✅ 讀寫極高頻 (百萬QPS)
✅ 可接受最終一致性

範例:
├─ 社群媒體 (Facebook, Twitter)
├─ IoT感測器資料
├─ 日誌分析
└─ 即時推薦系統

【何時用RDB?】
✅ 需ACID保證 (金融交易)
✅ 複雜查詢、JOIN多表
✅ 資料關聯性強
✅ Schema穩定
✅ 資料量中等 (GB-TB)

範例:
├─ 銀行系統
├─ ERP系統
├─ 電商訂單
└─ 會計系統
```

---

### 五、資料庫安全 (114年關務/110年關務考題!)

#### (1) SQL Injection攻擊

**定義**: 攻擊者透過輸入**惡意SQL語法**,竊取、竄改、刪除資料。

```
【攻擊範例】

【正常登入】
網站程式碼:
  SELECT * FROM users 
  WHERE username = '使用者輸入' 
    AND password = '密碼輸入';

正常輸入:
  帳號: alice
  密碼: password123

SQL:
  SELECT * FROM users 
  WHERE username = 'alice' 
    AND password = 'password123';

【SQL Injection攻擊】
攻擊者輸入:
  帳號: admin' --
  密碼: (任意)

生成SQL:
  SELECT * FROM users 
  WHERE username = 'admin' --' AND password = '...';
                         ↑
                   -- 是SQL註解,後面被忽略!

結果: 
  WHERE username = 'admin' (永遠True!)
  → 無需密碼即可登入admin帳號! ❌

【更嚴重: 刪除資料】
帳號: '; DROP TABLE users; --

生成SQL:
  SELECT * FROM users WHERE username = ''; 
  DROP TABLE users; 
  --' AND password = '...';

結果: users表被刪除! ❌❌❌
```

**防禦措施**:

```
【1. 參數化查詢 (Prepared Statement)】
// 不安全
String sql = "SELECT * FROM users WHERE username = '" + input + "'";

// 安全
String sql = "SELECT * FROM users WHERE username = ?";
PreparedStatement pstmt = conn.prepareStatement(sql);
pstmt.setString(1, input); // 自動跳脫特殊字元

【2. 輸入驗證】
✅ 白名單: 僅允許特定字元 (如英數字)
✅ 黑名單: 拒絕特殊字元 (' " ; -- 等)
✅ 長度限制

【3. 最小權限】
應用程式資料庫帳號:
❌ 不給DROP, ALTER權限
✅ 僅給SELECT, INSERT, UPDATE

【4. 錯誤訊息處理】
❌ 不顯示詳細SQL錯誤給使用者
   (洩漏資料庫結構)
✅ 僅顯示「登入失敗」等一般訊息

【5. WAF (Web Application Firewall)】
偵測SQL Injection特徵
→ 阻擋惡意請求
```

---

#### (2) 資料庫安全威脅 (106年高考: 列7種)

```
【7大資料庫安全威脅】

1. SQL Injection
   ↑ 已說明

2. 權限濫用 (Privilege Abuse)
   內部人員濫用權限
   竊取、洩漏資料

3. 弱密碼 / 預設帳密
   admin/admin
   root/root
   → 易被猜測

4. 資料外洩
   ├─ 備份檔案未加密
   ├─ 日誌檔含敏感資料
   └─ 測試環境用真實資料

5. 資料庫軟體漏洞
   未及時更新Patch
   → 已知漏洞被利用

6. 阻斷服務 (DoS)
   大量查詢癱瘓資料庫

7. 儲存媒體暴露
   硬碟未加密
   → 硬碟被偷 → 資料外洩

【其他威脅】
8. 備份資料未保護
9. 未授權存取
10. 稽核紀錄不足 (無法追查)
```

---

#### (3) 雲端資料庫防護措施 (109年關務: 至少4種)

```
【防護措施】

1. 加密
   ├─ 傳輸加密 (TLS/SSL)
   │   → 防中間人攻擊
   ├─ 靜態加密 (At-rest Encryption)
   │   → 資料庫檔案加密
   └─ 應用層加密
       → 敏感欄位加密 (如信用卡號)

2. 存取控制
   ├─ IAM (Identity and Access Management)
   ├─ 最小權限原則
   ├─ 多因素驗證 (MFA)
   └─ IP白名單 (僅特定IP可連)

3. 備份與DR
   ├─ 自動備份 (每日)
   ├─ 異地備份 (不同地區)
   ├─ 備份加密
   └─ 定期測試復原

4. 稽核與監控
   ├─ 存取日誌 (誰、何時、存取什麼)
   ├─ 異常偵測 (如半夜大量下載)
   ├─ 即時警報
   └─ 定期稽核審查

5. 網路隔離
   ├─ VPC (Virtual Private Cloud)
   ├─ 私有子網 (不對外)
   ├─ 安全群組 (Firewall規則)
   └─ VPN連線

6. 合約保障
   ├─ SLA (可用性保證)
   ├─ 資料主權 (資料存放地點)
   ├─ 資料刪除承諾
   └─ 安全認證 (ISO 27001)

7. 補丁管理
   ├─ 雲端廠商負責DBMS更新
   ├─ 自動套用安全補丁
   └─ 確認Patch排程

8. 資料遮罩
   ├─ 生產環境 → 測試環境
   ├─ 敏感資料去識別化
   └─ 防測試環境外洩
```

---

## 📚 歷屆精選題庫

### 類型一: 關聯式資料庫基礎 (⭐⭐⭐⭐)

| 年度 | 題目 | 關鍵字 |
|------|------|--------|
| 111年關務 | RDB資料模組邏輯架構+SQL+2PC | 完整基礎題 |
| 110年關務 | 正規化1NF/2NF/3NF+實作 | **完整必考** |
| 109年關務 | 邏輯設計vs實體設計+3V+vs Big Data | RDB vs Big Data |
| 107年 | DBMS功能+DBA任務+元件 | 管理面 |
| 106年 | DBMS vs 檔案系統優勢 | 比較題 |

### 類型二: 資料庫安全 (⭐⭐⭐⭐⭐)

| 年度 | 題目 | 關鍵字 |
|------|------|--------|
| 114年關務 | Ransomware+SQL Injection+3防護面向 | 最新題 |
| 110年關務四等 | ISO資安5需求+線上交易滿足方法 | 資安需求 |
| 110年高等二等 | 帳號管理5機制 | 身分驗證 |
| 109年關務 | 雲端資料庫防護4種以上 | 雲端安全 |
| 106年高考 | 資料庫安全威脅7種 | 威脅列舉 |

### 類型三: ACID特性 (⭐⭐⭐⭐)

| 年度 | 題目 | 關鍵字 |
|------|------|--------|
| 110年普考 | 資料庫交易4特性+意涵 | **ACID必考** |

### 類型四: NoSQL (⭐⭐⭐⭐)

| 年度 | 題目 | 關鍵字 |
|------|------|--------|
| 110年關務四等 | RDB vs NoSQL | 成對比較 |
| 109年關務 | Big Data 3V+vs RDB | 差異 |

---

## 🎯 答題技巧

### 技巧一: 正規化必畫表格

**1NF/2NF/3NF**: 每個都要畫**轉換前後表格**

### 技巧二: ACID記憶口訣

**口訣**: **原一隔持** (Atomicity/Consistency/Isolation/Durability)

每個特性必答:
1. 定義 (1行)
2. 意涵 (具體說明)
3. 範例 (轉帳)
4. 違反後果

### 技巧三: SQL Injection必畫攻擊範例

展示:
1. 正常SQL
2. 惡意輸入
3. 生成的危險SQL
4. 防禦手段(Prepared Statement)

---

## ✅ 學習檢查清單

### 關聯式資料庫
- [ ] 了解三層架構
- [ ] **能說明1NF/2NF/3NF**
- [ ] 了解SQL分類 (DDL/DML/DCL)
- [ ] 了解2PC兩階段流程

### ACID
- [ ] **能完整說明ACID四特性**
- [ ] 能舉轉帳範例
- [ ] 了解隔離等級

### NoSQL
- [ ] **能比較RDB vs NoSQL** (至少5個面向)
- [ ] 了解NoSQL 4種類型
- [ ] 了解適用場景

### 資料庫安全
- [ ] **能說明SQL Injection攻擊與防禦**
- [ ] 能列舉7種資料庫威脅
- [ ] 了解雲端資料庫防護措施

---

**📊 本文件統計**:
- 總字數: 約26,000字
- 總行數: 約900行

**完成狀態**: ✅ 資料庫管理完整解析已完成

