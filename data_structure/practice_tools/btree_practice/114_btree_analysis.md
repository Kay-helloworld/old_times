# 114年公務人員高等考試三級考試 - B-Tree 考題解析

## 第一題：B-Tree 插入模擬

**題目**：
一棵空的階數為 3 的 B-Tree (Order 3)。由左而右依序插入下列鍵值：`10, 80, 2, 9, 45, 62`。
請問插入完畢後，根節點中的鍵值有那些？請依序由小到大列出。

**解析**：

Order 3 (m=3) 的 B-Tree 特性：
*   每個節點最多有 m=3 個子節點。
*   每個節點最多有 m-1=2 個鍵值 (Key)。
*   當節點鍵值數達到 3 個時，必須進行分裂 (Split)，中間值往上提升。

### 步驟 1: 插入 10
```
[10]
```

### 步驟 2: 插入 80
```
[10, 80]
```
此時節點已滿 (2 個鍵值)。

### 步驟 3: 插入 2
插入 2 後，暫時變成 `[2, 10, 80]` (3 個鍵值，溢位)。
進行分裂：中間值 **10** 往上提升成為新的根節點。
```
    [10]
   /    \
 [2]    [80]
```

### 步驟 4: 插入 9
9 比 10 小，插入左子樹 `[2]`。
```
    [10]
   /    \
[2, 9]  [80]
```

### 步驟 5: 插入 45
45 比 10 大，插入右子樹 `[80]`。
```
    [10]
   /    \
[2, 9]  [45, 80]
```
右子樹已滿。

### 步驟 6: 插入 62
62 比 10 大，插入右子樹 `[45, 80]`。
暫時變成 `[45, 62, 80]` (溢位)。
進行分裂：中間值 **62** 往上提升，插入根節點 `[10]`。
根節點變成 `[10, 62]`。
```
      [10, 62]
     /    |    \
 [2, 9] [45]  [80]
```

### 最終結果
根節點中的鍵值為：**10, 62**

---

## 第二題：B-Tree 最大鍵值數計算

**題目**：
有一棵階數為 5 的 B-Tree (Order 5)，其高度 (height) 為 3，請問這棵樹中最多可以儲存多少個鍵值？

**解析**：

Order 5 (m=5) 的特性：
*   每個節點最多有 m=5 個子節點。
*   每個節點最多有 m-1=4 個鍵值。

要計算「最多」鍵值數，假設這是一棵**滿 (Full)** 的 B-Tree，即每個非葉子節點都有 m 個子節點，每個節點都有 m-1 個鍵值。

**層級計算 (假設根節點為第 1 層)**：

1.  **第 1 層 (根節點)**：
    *   節點數：$1$
    *   鍵值數：$1 \times 4 = 4$
    *   子節點數 (通往下一層)：$1 \times 5 = 5$

2.  **第 2 層**：
    *   節點數：$5$ (上一層的子節點數)
    *   鍵值數：$5 \times 4 = 20$
    *   子節點數：$5 \times 5 = 25$

3.  **第 3 層**：
    *   節點數：$25$
    *   鍵值數：$25 \times 4 = 100$

**總鍵值數**：
$4 + 20 + 100 = 124$

**公式解**：
一棵階數為 $m$、高度為 $h$ 的 B-Tree，最大鍵值數公式為：
$N_{max} = m^h - 1$

代入 $m=5, h=3$：
$5^3 - 1 = 125 - 1 = 124$

### 答案
最多可以儲存 **124** 個鍵值。
