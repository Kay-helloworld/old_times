# 06 Administration Security 完整題目解析 - 申論題答題框架

這份文件針對**06 Administration Security**相關題目提供詳盡的申論題答題架構。

---

## 📊 題目總覽

根據分析，在歷年資料庫應用考題中：

### 題目統計

| 統計項目 | 數量 |
|---------|------|
| **分析考卷總數** | **74 份** |
| **06 Administration Security相關題目** | **8 題** |
| **114年題目** | 1 題 |
| **重要性排名** | **No. 6** |

### 題型分類

| 題型 | 占比 | 代表題目 | 難度 |
|------|------|---------|------|
| **索引與儲存** | 40% | B-Tree, Hashing, RAID | ⭐⭐⭐ |
| **資料庫安全** | 30% | 存取控制, SQL Injection | ⭐⭐⭐⭐ |
| **備份與還原** | 20% | 備份策略, 災難復原 | ⭐⭐⭐ |
| **效能調校** | 10% | Query Optimization | ⭐⭐⭐⭐⭐ |

**難度星級說明**:
- ⭐⭐⭐ = 基礎必考
- ⭐⭐⭐⭐ = 進階重要
- ⭐⭐⭐⭐⭐ = 新興熱門 (近三年大量出現)

---

## 🎯 申論題答題黃金架構

### 1. 攻擊防禦題型 (例如：SQL Injection)

> **一、攻擊原理**
> (說明駭客如何透過輸入惡意字串，改變 SQL 語法邏輯)
>
> **二、攻擊範例**
> (舉例：`' OR '1'='1` 繞過登入驗證)
>
> **三、防範措施**
> (列出 3 點：使用 Prepared Statement、輸入驗證、最小權限原則)

### 2. 機制說明題型 (例如：View 的安全用途)

> **一、定義**
> (簡述 View 是虛擬資料表)
>
> **二、安全機制**
> (說明如何透過 View 隱藏敏感欄位，僅開放必要資料給使用者)
>
> **三、優缺點**
> (優點：簡化查詢、安全性；缺點：效能開銷)

---

### 1. 比較題型 (例如：B+ Tree vs Hash)

> **一、定義說明**
> (分別簡述兩者的定義與核心運作原理)
>
> **二、比較分析 (表格)**
> (使用表格列出：查詢速度、範圍查詢支援、空間利用率、適用場景)
>
> **三、結論**
> (總結在什麼情況下該選用哪一種技術)

### 2. 結構說明題型 (例如：解釋 B+ Tree)

> **一、結構特徵**
> (說明節點組成：Internal Node, Leaf Node, Pointers)
>
> **二、運作機制**
> (說明搜尋、插入、分裂的過程)
>
> **三、優點與應用**
> (說明為何資料庫愛用此結構，例如：磁碟 I/O 最佳化)

---



---

## 📚 【核心知識】完全解析



---

## 📝 實戰解析：精選題型詳解

### 【題型一】SQL Injection (資料隱碼攻擊)

#### 📌 原題：113年一般警察三等

> **題目**：
> 使用者輸入帳號 `acc` 和密碼 `pwd`。若輸入特定字串，雖未儲存於資料庫，卻可通過檢核進入會員區。
> 請問此攻擊名稱為何？解釋原因？並說明二種防制方法。

#### 💡 解析與擬答

**一、攻擊名稱**
**SQL Injection (資料隱碼攻擊)**。

**二、攻擊原因**
程式設計時，直接將使用者輸入的字串與 SQL 指令進行**字串串接 (String Concatenation)**，導致使用者輸入的惡意字元 (如單引號 `'`) 改變了原本 SQL 語句的邏輯結構。

- **範例**：
    原本程式：`SELECT * FROM member WHERE account = '` + `acc` + `' AND password = '` + `pwd` + `'`
    惡意輸入：`acc` 輸入 `' OR '1'='1`
    結果 SQL：`SELECT * FROM member WHERE account = '' OR '1'='1' AND ...`
    由於 `'1'='1'` 恆為真 (True)，導致 `WHERE` 子句條件永遠成立，成功繞過驗證。

**三、防制方法**

1. **使用參數化查詢 (Parameterized Query / Prepared Statement)**：
    這是最有效的方法。資料庫會將使用者輸入視為純粹的「參數值」，而非 SQL 指令的一部分，徹底阻斷惡意語法執行。
2. **輸入驗證 (Input Validation)**：
    檢查輸入資料是否符合預期格式 (如長度、型別)，並過濾特殊字元 (如單引號)。

---

### 【題型二】資料庫日誌 (Database Logs) 與稽核

#### 📌 原題：114年身心障礙三等

> **題目**：
> 說明 MySQL 常見日誌的用途：Transaction Log, Error Log, Query Log, Slow Query Log, Replication Log, Audit Log。

#### 💡 解析與擬答

這題考驗對資料庫維運與稽核的廣度認識。

| 日誌類型 | 用途說明 |
| :--- | :--- |
| **1. Transaction Log (交易日誌)** | 記錄交易的變更 (Redo/Undo)，用於系統崩潰後的**復原 (Recovery)**，確保 ACID 特性。 |
| **2. Error Log (錯誤日誌)** | 記錄資料庫啟動、停止及執行過程中的**嚴重錯誤訊息**，供管理員除錯。 |
| **3. General Query Log (查詢日誌)** | 記錄客戶端連線及**所有執行的 SQL 指令**，用於追蹤使用者行為。 |
| **4. Slow Query Log (慢查詢日誌)** | 記錄執行時間超過設定閾值的 SQL 指令，用於**效能調校**與優化。 |
| **5. Replication Log (複寫日誌)** | 即 Binary Log (Binlog)，記錄所有資料變更，用於主從式架構的**資料同步**。 |
| **6. Audit Log (稽核日誌)** | 記錄誰 (Who) 在何時 (When) 做了什麼 (What)，專用於**資安稽核**與合規性檢查。 |

---

### 【題型三】外來鍵約束與完整性 (Referential Integrity)

#### 📌 原題：114年身心障礙三等

> **題目**：
> 當主鍵 (PK) 紀錄被刪除時，外鍵 (FK) 有三種處理選項：CASCADE, SET NULL, RESTRICT。請說明差異。

#### 💡 解析與擬答

這是維護**參考完整性 (Referential Integrity)** 的關鍵機制。假設「部門表 (PK)」與「員工表 (FK)」有關聯。

**1. CASCADE (連鎖)**

- **行為**：當父表 (部門) 紀錄被刪除時，子表 (員工) 對應的紀錄也會**一併被自動刪除**。
- **影響**：資料清理最徹底，但風險最大，可能誤刪大量資料。

**2. SET NULL (設為空值)**

- **行為**：當父表紀錄被刪除時，子表對應的外鍵欄位會被**設為 NULL**。
- **影響**：保留子表紀錄，但該員工變成「無所屬部門」。(前提是 FK 欄位允許 NULL)。

**3. RESTRICT / NO ACTION (限制/不動作)**

- **行為**：當父表紀錄被刪除時，若子表仍有對應紀錄，則**拒絕刪除**父表紀錄並回傳錯誤。
- **影響**：保護機制最強，確保不會有「孤兒資料」產生。通常是預設值。

---

### 【題型四】View (視圖) 的安全用途

#### 📌 原題：113年一般警察三等

> **題目**：
> 闡述界視表 (VIEW) 的用途與優缺點。

#### 💡 解析與擬答

**一、用途 (安全性面向)**
View 是基於 SELECT 查詢所建立的虛擬表格。在資安上，它扮演**存取控制**的角色：

1. **隱藏敏感欄位**：例如員工資料表有 `Salary` 欄位，可建立一個不包含 `Salary` 的 View 開放給一般行政人員查詢，避免薪資外洩。
2. **列級安全 (Row-Level Security)**：透過 `WHERE` 子句 (例如 `WHERE DeptID = 'IT'`)，限制使用者只能看到自己部門的資料。

**二、優點**

1. **簡化查詢**：將複雜的 JOIN 封裝起來。
2. **邏輯獨立性**：底層資料表結構改變時，只需修改 View 定義，不影響上層應用程式。
3. **安全性**：提供細粒度的資料存取控制。

**三、缺點**

1. **效能開銷**：查詢 View 時需即時轉換為底層查詢，多一層轉換成本。
2. **更新限制**：並非所有 View 都能支援 INSERT/UPDATE (特別是包含聚合函數或 DISTINCT 時)。

---

### 【題型一】B+ Tree 結構與應用

#### 📌 原題：111年關務特考三等

> **題目**：
> 根據 `Mid` 欄位定義一個名為 `MyIndex` 的 **B+-tree** 索引。
> ⑴ 說明 `MyIndex` 的樹狀結構（內部節點、葉節點、特性）。
> ⑵ 說明系統如何利用該索引提升 `select Name from MEMBER where Mid = 'M001'` 的效能。

#### 💡 解析與擬答

**⑴ B+ Tree 樹狀結構說明**

B+ Tree 是一種平衡樹 (Balanced Tree)，其結構特性如下：

1. **內部節點 (Internal Nodes)**：
    - 僅儲存**索引鍵值 (Key)** 與**指標 (Pointer)**，不儲存實際資料。
    - 用來引導搜尋路徑，將搜尋範圍快速縮小。
2. **葉節點 (Leaf Nodes)**：
    - 儲存**所有的鍵值**與**資料指標 (Data Pointer)**（指向實際資料列）。
    - 所有葉節點透過**雙向鏈結 (Doubly Linked List)** 串連，方便進行範圍查詢 (Range Query)。
    - 所有葉節點都在同一層 (Balanced)，保證搜尋時間複雜度為 O(log N)。
3. **特性**：
    - **高扇出 (High Fan-out)**：每個節點可容納大量鍵值，降低樹的高度，減少磁碟 I/O 次數。

**⑵ 查詢效能提升機制**

針對 SQL：`SELECT Name FROM MEMBER WHERE Mid = 'M001'`

1. **搜尋過程**：
    - 系統從 B+ Tree 的**根節點 (Root)** 開始，比較 `M001` 與節點內的鍵值。
    - 依據比較結果，沿著指標向下走訪至下一層節點。
    - 重複此步驟直到抵達**葉節點 (Leaf Node)**。
2. **資料存取**：
    - 在葉節點中找到 `M001`，取得對應的資料指標 (RID)。
    - 直接根據 RID 讀取硬碟中的該筆資料列 (Row)，取出 `Name` 欄位。
3. **效能優勢**：
    - 若無索引，需進行**全表掃描 (Full Table Scan)**，成本為 O(N)。
    - 使用 B+ Tree 索引，僅需讀取少數幾個節點 (樹高通常為 3-4 層)，成本大幅降低為 O(log N)。

---

### 【題型二】雜湊 vs 循序 (Hash vs Sequential)

#### 📌 原題：112年一般警察特考三等

> **題目**：
> 比較 **雜湊法索引 (Hashing)** 與 **循序檔 (Sequential File)**：
> ⑴ 最壞資料找尋時間
> ⑵ 儲存空間利用率
> ⑶ 資料是否需排序
> ⑷ 是否適合 Linked List

#### 💡 解析與擬答

| 比較項目 | 雜湊法索引 (Hashing) | 循序檔 (Sequential File) |
| :--- | :--- | :--- |
| **⑴ 最壞搜尋時間** | **O(N)** <br> (發生嚴重碰撞 Collision 時退化為鏈結串列搜尋) | **O(log N)** <br> (若使用二元搜尋法 Binary Search) |
| **⑵ 空間利用率** | **較低** <br> (需預留 Bucket 空間以減少碰撞，會有內部破碎) | **較高** <br> (資料緊密排列，無多餘空間浪費) |
| **⑶ 是否需排序** | **否** <br> (資料依雜湊函數計算位置隨機存放) | **是** <br> (資料依鍵值順序存放) |
| **⑷ Linked List 適合度** | **適合** <br> (常用於解決碰撞問題，如 Chaining 法) | **不適合** <br> (循序檔通常強調連續實體儲存以利批次處理) |

---

### 【題型三】RAID 等級與特性

#### 📌 原題：107年調查局三等

> **題目**：
> 磁碟陣列 RAID 技術可用來提供容錯功能，試描述不同等級 RAID 的特性及優缺點。

#### 💡 解析與擬答

RAID (Redundant Array of Independent Disks) 利用多顆硬碟提升效能與可靠性。

**1. RAID 0 (Striping / 分割)**

- **特性**：將資料分散寫入多顆硬碟。
- **優點**：讀寫效能最高 (並行處理)。
- **缺點**：**無容錯能力**，任一顆硬碟壞掉，資料全毀。

**2. RAID 1 (Mirroring / 鏡像)**

- **特性**：將資料完全複製到另一顆硬碟。
- **優點**：容錯能力佳 (可壞一顆)，讀取速度快 (可同時讀)。
- **缺點**：**空間利用率低 (50%)**，成本高。

**3. RAID 5 (Striping with Parity / 分散同位元)**

- **特性**：資料與同位元檢查碼 (Parity) 分散儲存在所有硬碟。
- **優點**：兼具容錯 (可壞一顆) 與效能，空間利用率較 RAID 1 高 (N-1/N)。
- **缺點**：寫入效能稍差 (需計算 Parity)。

**4. RAID 10 (RAID 1 + RAID 0)**

- **特性**：先做 Mirror (RAID 1) 再做 Striping (RAID 0)。
- **優點**：兼具高效能與高容錯。
- **缺點**：成本最高 (空間利用率 50%)。

---

### 【題型四】叢集 vs 非叢集索引

#### 📌 原題：106年地方特考三等

> **題目**：
> 請解釋 **叢集索引 (Clustered Index)** 與 **非叢集索引 (Non-Clustered Index)** 的意義與差別。

#### 💡 解析與擬答

這題是索引觀念的經典題，核心在於「實體排序」。

**1. 叢集索引 (Clustered Index)**

- **意義**：資料表的**實體資料排列順序**與索引鍵值的順序**相同**。
- **特點**：
  - 一個資料表**只能有一個**叢集索引 (因為實體排序只能有一種)。
  - 葉節點就是**實際的資料頁 (Data Page)**。
  - 通常預設建立在 **Primary Key** 上。
- **優點**：範圍查詢 (Range Query) 速度極快。

**2. 非叢集索引 (Non-Clustered Index)**

- **意義**：索引的邏輯順序與資料的實體儲存順序**無關**。
- **特點**：
  - 一個資料表可以有**多個**非叢集索引。
  - 葉節點儲存的是**指向實際資料的指標 (Row ID 或 Clustered Key)**。
- **優點**：適合用於輔助查詢特定欄位，不影響資料實體結構。

**差異總結**：

- **數量**：叢集索引限 1 個；非叢集索引可多個。
- **內容**：叢集索引葉節點是資料本身；非叢集索引葉節點是指標。
- **速度**：叢集索引通常比非叢集索引快 (省去一次指標跳轉)。

---



---

## 📖 歷屆考題彙整連結

請參閱同目錄下的 `06_Administration_Security.md` 檔案以查看完整歷屆考題。
